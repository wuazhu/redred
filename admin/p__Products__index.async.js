"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[967],{25097:function(W,P,r){r.r(P);var I=r(30279),C=r.n(I),D=r(35290),_=r.n(D),M=r(411),d=r.n(M),O=r(67116),p=r(39722),v=r(55804),h=r(5223),g=r(66268),y=r(81656),L=r(93236),T=r(63169),s=r(62086),m=O.Z.ProductsController,R=m.queryProducts,x=m.updateToTop,j=m.onLineOffLine,U=m.deleteProduct,A=O.Z.FileController.uploadCode,B=function(){var f=(0,L.useRef)(),b=[{title:"\u4EA7\u54C1id",dataIndex:"id",valueType:"text",hideInSearch:!0,width:60},{title:"\u540D\u79F0",dataIndex:"name",valueType:"text"},{title:"\u5E93\u5B58",dataIndex:"inventory",valueType:"text",hideInSearch:!0},{title:"\u5DF2\u552E",dataIndex:"quantitySold",hideInSearch:!0,hideInForm:!0},{title:"\u4EF7\u683C",dataIndex:"price",hideInSearch:!0,hideInForm:!0,render:function(u,e){return"".concat(e.price/100)}},{title:"\u72B6\u6001",dataIndex:"status",hideInSearch:!1,valueEnum:{2:{text:"\u4E0B\u7EBF",status:"Default"},1:{text:"\u5DF2\u4E0A\u7EBF",status:"Success"}}},{title:"\u5F52\u5C5E\u516C\u53F8",dataIndex:"company",valueType:"text",hideInSearch:!0},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",align:"right",render:function(u,e){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.rCM,{width:"sm",title:"\u4E0A\u4F20\u7EA2\u5305\u7801",data:{productId:e.id},action:function(a){return new Promise(function(){var t=d()(_()().mark(function o(i,Z){var E;return _()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,A({multipartFile:a,productId:e.id});case 2:E=c.sent,console.log("\u4E0A\u4F20\u6587\u4EF6\u7ED3\u679C",E),E.code==0&&f.current.reload();case 5:case"end":return c.stop()}},o)}));return function(o,i){return t.apply(this,arguments)}}())},rules:[{required:!0,message:"\u5FC5\u586B"}]}),(0,s.jsx)(v.Z,{type:"vertical"}),(0,s.jsx)("a",{onClick:function(){var a=h.ZP.loading("\u8BBE\u7F6E\u4E2D");K(e),setTimeout(function(){var t;(t=f.current)===null||t===void 0||t.reload(),a()},300)},children:e.status==1?"\u4E0B\u7EBF":"\u4E0A\u7EBF"}),(0,s.jsx)(v.Z,{type:"vertical"}),(0,s.jsx)("a",{onClick:function(){T.history.push("/products/".concat(e.id),e)},children:"\u7F16\u8F91"}),(0,s.jsx)(v.Z,{type:"vertical"}),(0,s.jsx)(g.Z,{title:"\u786E\u8BA4\u5220\u9664\uFF1F",okText:"Yes",cancelText:"No",onConfirm:function(){if(e.status==1){h.ZP.info("\u8BF7\u5148\u4E0B\u7EBF\u4EA7\u54C1\u540E\u518D\u5220\u9664!");return}var a=h.ZP.loading("\u8BBE\u7F6E\u4E2D");w(e),setTimeout(function(){var t;(t=f.current)===null||t===void 0||t.reload(),a()},300)},children:(0,s.jsx)("a",{children:"\u5220\u9664"})})]})}}],w=function(){var l=d()(_()().mark(function u(e){var n,a;return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n=e.id,o.next=3,U(n);case 3:a=o.sent,console.log("\u5220\u9664",a);case 5:case"end":return o.stop()}},u)}));return function(e){return l.apply(this,arguments)}}(),K=function(){var l=d()(_()().mark(function u(e){var n,a,t;return _()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.id,a=e.status,i.next=3,j({productId:n,status:a==1?2:1});case 3:t=i.sent,console.log("\u8BBE\u7F6E\u4E0A\u4E0B",t);case 5:case"end":return i.stop()}},u)}));return function(e){return l.apply(this,arguments)}}(),S=function(){var l=d()(_()().mark(function u(e){var n,a,t;return _()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log(e),n=e.id,a=e.topFlag,i.next=4,x({id:n,topFlag:!a});case 4:t=i.sent,console.log("\u7ED3\u679C",t);case 6:case"end":return i.stop()}},u)}));return function(e){return l.apply(this,arguments)}}();return(0,s.jsx)(p._zJ,{header:{title:"\u6240\u6709\u4EA7\u54C1"},children:(0,s.jsx)(p.QVr,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:f,rowKey:"id",search:{labelWidth:120},toolbar:{subTitle:"\u53EA\u6709\u4E0A\u7EBF\u4EA7\u54C1\u624D\u4F1A\u5728\u5C0F\u7A0B\u5E8F\u5C55\u793A"},toolBarRender:function(){return[(0,s.jsx)(y.Z,{type:"primary",onClick:function(){return T.history.push("/products/create")},children:"\u65B0\u5EFA\u4EA7\u54C1"},"1")]},request:function(){var l=d()(_()().mark(function u(e){var n;return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("\u53C2\u6570\u54AF",e),t.next=3,R(C()({},e));case 3:return n=t.sent,console.log("\u4EA7\u54C1\u4FE1\u606F",n),t.abrupt("return",{data:(n==null?void 0:n.data.records)||[],total:(n==null?void 0:n.data.total)||0,success:(n==null?void 0:n.code)==0});case 6:case"end":return t.stop()}},u)}));return function(u){return l.apply(this,arguments)}}(),columns:b})})};P.default=B}}]);
