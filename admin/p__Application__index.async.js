"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[396],{4911:function(N,D,n){n.r(D);var A=n(30279),b=n.n(A),T=n(35290),o=n.n(T),F=n(411),p=n.n(F),B=n(46686),E=n.n(B),R=n(67116),_=n(39722),j=n(37085),y=n(66268),c=n(5223),S=n(81656),U=n(39286),i=n(93236),u=n(62086),h=R.Z.CompanyController,w=h.getApplications,x=h.getCompanys,K=h.createOrEditApp,W=h.deleteApp,L=function(){var f=(0,i.useRef)(),z=(0,i.useState)([]),I=E()(z,2),G=I[0],J=I[1],Z=(0,i.useState)(!1),M=E()(Z,2),$=M[0],v=M[1],V=(0,i.useState)(),P=E()(V,2),O=P[0],C=P[1],g=(0,i.useRef)(),Q=[{title:"\u5F52\u5C5E\u516C\u53F8",dataIndex:"company",hideInSearch:!0,render:function(t,a){var e=a.company;return(0,u.jsx)(j.Z,{color:e=="\u8FC8\u683C\u667A\u80FD"?"magenta":e=="\u4E00\u7C92\u9EA6"?"green":e=="\u65E0\u90AA\u6587\u5316"?"purple":e=="\u8363\u4E1C\u8FBE\u666E"?"blue":"gold",children:a.company})}},{title:"\u5C0F\u7A0B\u5E8F\u540D\u79F0",dataIndex:"applicationName",valueType:"text",hideInSearch:!0},{title:"appCode",dataIndex:"appCode",valueType:"text",hideInSearch:!0},{title:"\u5546\u6237\u53F7",dataIndex:"receivingMerchantNumber",valueType:"text",hideInSearch:!0},{title:"appId",dataIndex:"appId",valueType:"text",hideInSearch:!0},{title:"appSecret",dataIndex:"appSecret",valueType:"text",hideInSearch:!0},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",align:"right",render:function(t,a){return[(0,u.jsx)("a",{onClick:function(){console.log(a),C(a.id),v(!0),setTimeout(function(){var r;(r=g.current)===null||r===void 0||r.setFieldsValue(a)},100)},children:"\u7F16\u8F91"},"edit"),(0,u.jsx)(y.Z,{title:"\u786E\u8BA4\u5220\u9664?",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onConfirm:p()(o()().mark(function e(){var r;return o()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return r=c.ZP.loading("\u8BBE\u7F6E\u4E2D"),m.next=3,W(a.id);case 3:setTimeout(function(){var d;(d=f.current)===null||d===void 0||d.reload(),r()},300);case 4:case"end":return m.stop()}},e)})),children:(0,u.jsx)("a",{children:"\u5220\u9664"})},"delete")]}}];return(0,u.jsxs)(_._zJ,{header:{title:"\u5E94\u7528\u5217\u8868"},children:[(0,u.jsx)(_.QVr,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:f,rowKey:"id",search:{labelWidth:120},pagination:{pageSize:100},toolBarRender:function(){return[(0,u.jsx)(S.Z,{type:"primary",onClick:function(){return v(!0)},children:"\u521B\u5EFA\u5E94\u7528"})]},request:function(){var s=p()(o()().mark(function t(a){var e;return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,w(b()(b()({},a),{},{pageSize:100}));case 2:return e=l.sent,console.log("\u6240\u6709\u5E94\u7528",e),l.abrupt("return",{data:(e==null?void 0:e.data.records)||[],total:(e==null?void 0:e.data.total)||0,success:(e==null?void 0:e.code)==0});case 5:case"end":return l.stop()}},t)}));return function(t){return s.apply(this,arguments)}}(),columns:Q}),(0,u.jsx)(U.Z,{open:$,footer:null,onCancel:function(){C(null),v(!1)},afterClose:function(){var t,a;C(null),(t=f.current)===null||t===void 0||t.reload(),(a=g.current)===null||a===void 0||a.resetFields()},children:(0,u.jsxs)(_.A96,{formRef:g,onFinish:function(){var s=p()(o()().mark(function t(a){var e,r,l;return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return console.log("values",a),e=c.ZP.loading("\u63D0\u4EA4\u4E2D..."),r=a,O&&(r.id=O),d.next=6,K(r);case 6:l=d.sent,console.log("\u521B\u5EFA\u6216\u8005\u4FEE\u6539app",l),l.code==0?(e(),c.ZP.success("\u6210\u529F"),v(!1)):c.ZP.error(l.data.errorMsg);case 9:case"end":return d.stop()}},t)}));return function(t){return s.apply(this,arguments)}}(),children:[(0,u.jsx)(_.VaQ,{width:"md",name:"applicationName",label:"\u5C0F\u7A0B\u5E8F\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u5C0F\u7A0B\u5E8F\u540D\u79F0",rules:[{required:!0,message:"\u5FC5\u586B"}]}),(0,u.jsx)(_.VaQ,{width:"md",name:"appCode",label:"appCode",placeholder:"\u8BF7\u8F93\u5165appCode",rules:[{required:!0,message:"\u5FC5\u586B"}]}),(0,u.jsx)(_.VaQ,{width:"md",name:"appId",label:"appId",placeholder:"\u8BF7\u8F93\u5165appId",rules:[{required:!0,message:"\u5FC5\u586B"}]}),(0,u.jsx)(_.VaQ,{width:"md",name:"appSecret",label:"appSecret",placeholder:"\u8BF7\u8F93\u5165appSecret",rules:[{required:!0,message:"\u5FC5\u586B"}]}),(0,u.jsx)(_.VaQ,{width:"md",name:"receivingMerchantNumber",label:"\u5546\u6237\u53F7",placeholder:"\u8BF7\u8F93\u5165\u5546\u6237\u53F7",rules:[{required:!0,message:"\u5FC5\u586B"}]}),(0,u.jsx)(_.VaQ,{width:"md",name:"salt",label:"salt",placeholder:"\u8BF7\u8F93\u5165salt",rules:[{required:!0,message:"\u5FC5\u586B"}]}),(0,u.jsx)(_._IT,{width:"md",name:"company",label:"\u5C0F\u7A0B\u5E8F\u5F52\u5C5E\u516C\u53F8",rules:[{required:!0,message:"\u5FC5\u586B"}],request:p()(o()().mark(function s(){var t,a;return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,x();case 2:return t=r.sent,a=t.data.map(function(l){return{label:l.companyName,value:l.companyCode}}),r.abrupt("return",a);case 5:case"end":return r.stop()}},s)}))}),(0,u.jsx)(_._IT,{width:"md",name:"platform",label:"\u5C0F\u7A0B\u5E8F\u5F52\u5C5E\u5E73\u53F0",rules:[{required:!0,message:"\u5FC5\u586B"}],options:[{label:"\u6296\u97F3",value:"1"},{label:"\u5FEB\u624B",value:"2"}]})]})})]})};D.default=L}}]);
