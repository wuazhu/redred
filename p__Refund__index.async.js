"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[307],{85280:function(x,p,n){n.r(p);var I=n(30279),O=n.n(I),M=n(35290),u=n.n(M),b=n(411),m=n.n(b),T=n(46686),C=n.n(T),R=n(67116),v=n(39722),i=n(5223),U=n(55804),h=n(81656),j=n(82947),g=n(93236),_=n(62086),D=R.Z.OrdersController,y=D.queryRefunds,E=D.refundAuditing,A=function(){var c=(0,g.useRef)(),B=(0,g.useState)([]),P=C()(B,2),d=P[0],w=P[1],W=[{title:"\u5546\u54C1\u540D\u79F0",dataIndex:"subject",valueType:"text",hideInSearch:!0},{title:"\u6296\u97F3\u8BA2\u5355\u53F7",dataIndex:"orderId",valueType:"text"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",hideInSearch:!0},{title:"\u7528\u6237\u9000\u6B3E\u539F\u56E0",dataIndex:"reason",hideInSearch:!0},{title:"\u8BA2\u5355\u72B6\u6001",dataIndex:"status",valueType:"text",valueEnum:{\u5F85\u5BA1\u6838:{text:"\u5F85\u5BA1\u6838",status:"Warning"},\u5DF2\u9000\u6B3E:{text:"\u5DF2\u9000\u6B3E",status:"Success"},\u9000\u6B3E\u4E2D:{text:"\u9000\u6B3E\u4E2D",status:"Processing"},\u5DF2\u62D2\u7EDD:{text:"\u5DF2\u62D2\u7EDD",status:"Error"},\u9000\u6B3E\u5931\u8D25:{text:"\u9000\u6B3E\u5931\u8D25",status:"Error"}}},{title:"\u91D1\u989D",dataIndex:"refundAmount",hideInSearch:!0,hideInForm:!0,render:function(l,t){return(0,_.jsx)(_.Fragment,{children:t.refundAmount/100})}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",align:"right",render:function(l,t){return t.status=="\u5F85\u5BA1\u6838"?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("a",{onClick:m()(u()().mark(function r(){var e;return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e=i.ZP.loading("\u8BBE\u7F6E\u4E2D"),s.next=3,E({orderIds:[t.orderId],auditingStatus:"\u901A\u8FC7",reply:"\u5DF2\u540C\u610F\u9000\u6B3E,\u8BF7\u6CE8\u610F\u8BA2\u5355\u72B6\u6001"});case 3:setTimeout(function(){var o;(o=c.current)===null||o===void 0||o.reload(),e()},300);case 4:case"end":return s.stop()}},r)})),children:"\u540C\u610F\u9000\u6B3E"}),(0,_.jsx)(U.Z,{type:"vertical"}),(0,_.jsx)(h.Z,{type:"link",danger:!0,onClick:m()(u()().mark(function r(){var e;return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e=i.ZP.loading("\u8BBE\u7F6E\u4E2D"),console.log(t),s.next=4,E({orderIds:[t.orderId],auditingStatus:"\u62D2\u7EDD",reply:"\u5151\u6362\u7801\u5DF2\u4E0B\u53D1\u4F7F\u7528, \u62D2\u7EDD\u9000\u6B3E"});case 4:setTimeout(function(){var o;(o=c.current)===null||o===void 0||o.reload(),e()},300);case 5:case"end":return s.stop()}},r)})),children:"\u62D2\u7EDD\u9000\u6B3E"})]}):"\u65E0"}}];return(0,_.jsx)(v._zJ,{header:{title:"\u9000\u6B3E\u5355"},children:(0,_.jsx)(v.QVr,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:c,rowKey:"orderId",search:{labelWidth:120},toolBarRender:function(){return[(0,_.jsxs)(j.Z,{size:16,children:[(0,_.jsx)(h.Z,{type:"primary",onClick:m()(u()().mark(function l(){var t;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("\u6279\u91CF\u540C\u610F",d),!(d.length>0)){e.next=12;break}if(!d.some(function(a){return a.status!="\u5F85\u5BA1\u6838"})){e.next=8;break}return console.log("\u5B58\u5728\u975E\u5F85\u5BA1\u6838"),i.ZP.warning("\u5217\u8868\u4E2D\u5B58\u5728\u975E\u5F85\u5BA1\u6838\u6570\u636E, \u8BF7\u8FC7\u6EE4\u51FA\u5F85\u5BA1\u6838\u6570\u636E\u540E\u63D0\u4EA4!"),e.abrupt("return");case 8:return t=i.ZP.loading("\u5904\u7406\u4E2D"),e.next=11,E({orderIds:d.map(function(a){return a.orderId}),auditingStatus:"\u901A\u8FC7",reply:"\u5DF2\u540C\u610F\u9000\u6B3E,\u8BF7\u6CE8\u610F\u8BA2\u5355\u72B6\u6001"});case 11:setTimeout(function(){t(),c.current.reload()},300);case 12:case"end":return e.stop()}},l)})),children:"\u6279\u91CF\u540C\u610F"}),(0,_.jsx)(h.Z,{type:"primary",danger:!0,onClick:m()(u()().mark(function l(){var t;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(d.length>0)){e.next=11;break}if(!d.some(function(a){return a.status!="\u5F85\u5BA1\u6838"})){e.next=7;break}return console.log("\u5B58\u5728\u975E\u5F85\u5BA1\u6838"),i.ZP.warning("\u5217\u8868\u4E2D\u5B58\u5728\u975E\u5F85\u5BA1\u6838\u6570\u636E, \u8BF7\u8FC7\u6EE4\u51FA\u5F85\u5BA1\u6838\u6570\u636E\u540E\u63D0\u4EA4!"),e.abrupt("return");case 7:return t=i.ZP.loading("\u5904\u7406\u4E2D"),e.next=10,E({orderIds:d.map(function(a){return a.orderId}),auditingStatus:"\u62D2\u7EDD",reply:"\u5151\u6362\u7801\u5DF2\u4E0B\u53D1\u4F7F\u7528, \u62D2\u7EDD\u9000\u6B3E"});case 10:setTimeout(function(){t(),c.current.reload()},300);case 11:console.log("\u6279\u91CF\u62D2\u7EDD",d);case 12:case"end":return e.stop()}},l)})),children:"\u6279\u91CF\u62D2\u7EDD"})]})]},request:function(){var f=m()(u()().mark(function l(t){var r;return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y(O()({},t));case 2:return r=a.sent,console.log("\u8BA2\u5355\u4FE1\u606F",r),w(r.data.records),a.abrupt("return",{data:(r==null?void 0:r.data.records)||[],total:(r==null?void 0:r.data.total)||0,success:(r==null?void 0:r.code)==0});case 6:case"end":return a.stop()}},l)}));return function(l){return f.apply(this,arguments)}}(),columns:W})})};p.default=A}}]);
